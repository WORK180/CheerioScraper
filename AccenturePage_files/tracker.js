"use strict";function stringifyObject(t){var e=Object.keys(t);return e=e.filter(function(e){return t[e]&&t[e].length>0}),"?"+e.map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function setTrackerUrl(t,e){trackerUrl=t,appKey=e}function trackPageview(){if(1!=navigator.doNotTrack){var t=location.pathname+location.search,e=document.querySelector('link[rel="canonical"]');e&&e.href&&(t="https:"===location.protocol?e.href.substring(e.href.indexOf("/",8))||"/":e.href.substring(e.href.indexOf("/",7))||"/");var a={h:location.hostname,t:document.title,l:navigator.language,p:t,sr:screen.width+"x"+screen.height,ru:document.referrer,rk:"",k:appKey},n=document.createElement("img");n.src=trackerUrl+stringifyObject(a),document.body.appendChild(n)}}function inject(t){if(1!=navigator.doNotTrack){if(eventsTrakingUrl=t,!window.jQuery)return void console.log("jquery is required");injectFilters(),injectNavigation(),startFilterAndNavigationTracking(),startSearchTracking(),startJobApplicationTracking(),$(document).on("pjax:end",function(t,e,a,n){injectFilters(),injectNavigation(),startFilterAndNavigationTracking(),startSearchTracking(),startJobApplicationTracking()})}}function setAttrForList(t,e){$("."+t).find("ul").find("li").each(function(){var e=t,a=$(this),n=a.find("a").html().replace(/<.*>/g,"").trim().replace(/\s+/g," ");a.attr("vaKey",e),a.addClass("va-filter"),a.attr("vaVal",n.toLowerCase()),a.attr("vaType","filter")})}function injectFilters(){trackingList.forEach(function(t){setAttrForList(t)})}function startFilterAndNavigationTracking(){$("body").on("click",".va-filter,.va-nav",function(){var t=$(this),e={h:location.hostname,t:t.attr("vaType"),k:t.attr("vaKey"),v:t.attr("vaVal")},a=document.getElementsByClassName("va-img")[0]||document.createElement("img");a.setAttribute("class","va-img"),a.src=eventsTrakingUrl+stringifyObject(e),document.body.appendChild(a)})}function injectNavigation(){$(".job-title,.job-read-more-link").each(function(){var t=$(this).find("a").attr("href"),e=$(this);e.attr("vaType","navigation"),e.attr("vaKey","job_navigation"),e.attr("vaVal",t),e.addClass("va-nav")}),$(".job-apply,.job-apply-now-link").each(function(){var t=$(this).find("a").attr("href"),e=$(this);e.attr("vaType","navigation"),e.attr("vaKey","job_application"),e.attr("vaVal",t),e.addClass("va-nav")})}function startSearchTracking(){$(".search").on("click",function(){var t={h:location.hostname,t:"search",k:"keyword",v:$("#search_query").val()},e=document.getElementsByClassName("va-img")[0]||document.createElement("img");e.setAttribute("class","va-img"),e.src=eventsTrakingUrl+stringifyObject(t),document.body.appendChild(e)}),$("body").on("click","div[data-selectable]",function(){alert($(this).data("value"))}),$("#seo_location").on("change",function(){var t={h:location.hostname,t:"search",k:"seo_locations",v:$(this).val().replace(/-/g," ").toLowerCase()},e=document.getElementsByClassName("va-img")[0]||document.createElement("img");e.setAttribute("class","va-img"),e.src=eventsTrakingUrl+stringifyObject(t),document.body.appendChild(e)})}function startJobApplicationTracking(){$("#form-holder").find("form").on("submit",function(){var t=$(".job-reference").html().replace(/<.*>/g,"").replace("Reference:","").trim().replace(/\s+/g," ");if($(this).valid()){var e={h:location.hostname,t:"job_application",k:"application_reference",v:t},a=document.getElementsByClassName("va-img")[0]||document.createElement("img");a.setAttribute("class","va-img"),a.src=eventsTrakingUrl+stringifyObject(e),document.body.appendChild(a)}})}var queue=window.vana.q||[],trackerUrl="//vana.dev/collect",eventsTrakingUrl="//vana.dev/eventsTracking",appKey="",commands={trackPageview:trackPageview,setTrackerUrl:setTrackerUrl,eventsTrackingInject:inject},trackingList=["job_types","disciplines","seo_locations"];window.vana=function(){var t=[].slice.call(arguments),e=t.shift();commands[e].apply(this,t)},queue.forEach(function(t){vana.apply(this,t)});